---
environment:
  properties:
    artifactsDir: out/jreleaser/assemble/pgrank/archive

project:
  name: pgrank
  description: cpp app for computing pagerank
  website: https://github.com/andros21/pgrank
  docsUrl: https://andros21.github.io/pgrank/
  authors:
    - Andrea Rossoni
  license: GPLv3
  licenseUrl: https://github.com/andros21/pgrank/blob/master/LICENSE
  extraProperties:
    inceptionYear: 2021

platform:
  replacements:
    'linux-x86_64': 'x86_64-linux-gnu'

release:
  github:
    name: pgrank
    overwrite: true
    branch: master
    changelog:
      formatted: ALWAYS
      format: '- {{commitShortHash}} {{commitTitle}}'
      preset: conventional-commits
      contributors:
        format: '- {{contributorName}} ({{contributorUsernameAsLink}})'

assemble:
  archive:
    pgrank:
      active: ALWAYS
      formats:
        - TGZ
      attachPlatform: true
      fileSets:
        - input: 'include'
          output: 'include'
        - input: 'src'
          output: 'src'
        - input: 'subprojects'
          output: 'subprojects'
          includes:
            - '*.wrap'
        - input: 'tests'
          output: 'tests'
        - input: '.'
          includes:
            - 'LICENSE'
            - 'README.md'
            - 'meson.build'
            - 'meson_options.txt'
            - 'requirements.txt'

checksum:
  name: '{{projectName}}-{{projectVersion}}_checksums.txt'

distributions:
  pgrank:
    type: BINARY
    artifacts:
      - path: '{{artifactsDir}}/{{distributionName}}-{{projectVersion}}-x86_64-linux-gnu.tgz'
        platform: 'linux-x86_64'
